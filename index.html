<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Studio Pro | Web IDE</title>
    <style>
        :root {
            --bg-main: #0d1117;
            --bg-editor: #161b22;
            --accent: #58a6ff;
            --border: #30363d;
            --text: #c9d1d9;
            --err: #f85149;
            --success: #3fb950;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif; background: var(--bg-main); color: var(--text); height: 100vh; overflow: hidden; display: flex; flex-direction: column; }

        /* Navigation Bar */
        nav { height: 48px; background: #010409; display: flex; align-items: center; padding: 0 16px; border-bottom: 1px solid var(--border); justify-content: space-between; }
        .brand { font-weight: 600; font-size: 14px; display: flex; align-items: center; gap: 8px; }
        .brand span { background: var(--accent); color: black; padding: 2px 6px; border-radius: 4px; font-size: 10px; }
        
        .status-bar { display: flex; gap: 15px; font-size: 12px; }
        .status-item { display: flex; align-items: center; gap: 5px; }
        .indicator { width: 8px; height: 8px; border-radius: 50%; background: var(--success); }
        .indicator.error { background: var(--err); box-shadow: 0 0 8px var(--err); }

        /* Layout Workspace */
        .workspace { display: flex; flex: 1; overflow: hidden; }

        /* Editor Section */
        .editor-container { width: 50%; display: flex; flex-direction: column; background: var(--bg-editor); border-right: 1px solid var(--border); }
        .tab-bar { display: flex; background: #010409; border-bottom: 1px solid var(--border); }
        .tab { padding: 10px 20px; font-size: 12px; cursor: pointer; border-right: 1px solid var(--border); background: #0d1117; color: #8b949e; transition: 0.2s; }
        .tab.active { background: var(--bg-editor); color: var(--accent); border-bottom: 2px solid var(--accent); }

        textarea { flex: 1; background: transparent; color: #d4d4d4; border: none; padding: 20px; font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace; font-size: 14px; outline: none; resize: none; line-height: 1.6; }

        /* Preview Section */
        .preview-container { width: 50%; display: flex; flex-direction: column; background: white; }
        iframe { flex: 1; border: none; background: white; }

        /* Professional Console */
        .console { height: 180px; background: #010409; border-top: 1px solid var(--border); display: flex; flex-direction: column; }
        .console-header { padding: 6px 15px; background: #0d1117; font-size: 11px; font-weight: bold; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; }
        #console-output { flex: 1; overflow-y: auto; padding: 10px; font-family: monospace; font-size: 12px; line-height: 1.5; }
        .log-entry { margin-bottom: 4px; border-bottom: 1px solid #161b22; padding-bottom: 2px; }
        .log-time { color: #484f58; margin-right: 8px; }
        .log-error { color: var(--err); }
        .log-info { color: var(--accent); }
    </style>
</head>
<body>

    <nav>
        <div class="brand">STUDIO_PRO <span>CORE v1.0</span></div>
        <div class="status-bar">
            <div class="status-item"><div id="status-light" class="indicator"></div> <span id="status-text">System Ready</span></div>
        </div>
    </nav>

    <div class="workspace">
        <section class="editor-container">
            <div class="tab-bar">
                <div class="tab active">index.html / main.css / script.js</div>
            </div>
            <textarea id="main-editor" spellcheck="false" placeholder="Enter your full code here..."><div class="card">
  <h1>Professional Editor</h1>
  <p id="msg">Current status: Active</p>
  <button onclick="greet()">Click Me</button>
</div>

<style>
  body { background: #f0f2f5; display: grid; place-items: center; height: 100vh; font-family: sans-serif; }
  .card { background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); text-align: center; }
  button { margin-top: 15px; padding: 10px 20px; cursor: pointer; background: #58a6ff; border: none; color: white; border-radius: 6px; }
</style>

<script>
  function greet() {
    const msg = document.getElementById('msg');
    msg.innerText = "Button clicked! Check the console below.";
    console.log("Action performed at: " + new Date().toLocaleTimeString());
  }
</script></textarea>
        </section>

        <section class="preview-container">
            <iframe id="preview-frame"></iframe>
            <div class="console">
                <div class="console-header">
                    <span>TERMINAL / OUTPUT</span>
                    <span style="cursor:pointer; color: var(--accent)" onclick="clearConsole()">Clear</span>
                </div>
                <div id="console-output"></div>
            </div>
        </section>
    </div>

    <script>
        const editor = document.getElementById('main-editor');
        const preview = document.getElementById('preview-frame');
        const consoleOutput = document.getElementById('console-output');
        const statusLight = document.getElementById('status-light');
        const statusText = document.getElementById('status-text');

        function appendLog(message, type = 'info') {
            const time = new Date().toLocaleTimeString([], { hour12: false });
            const entry = document.createElement('div');
            entry.className = `log-entry ${type === 'error' ? 'log-error' : 'log-info'}`;
            entry.innerHTML = `<span class="log-time">[${time}]</span> ${message}`;
            consoleOutput.appendChild(entry);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }

        function clearConsole() {
            consoleOutput.innerHTML = '';
            appendLog('Console cleared.');
        }

        function update() {
            try {
                const code = editor.value;
                
                // Injection script to proxy errors and logs to the custom terminal
                const proxyScript = `
                    <script>
                        window.onerror = function(msg, url, line) {
                            window.parent.postMessage({type: 'error', data: msg + " (Line: " + line + ")"}, '*');
                        };
                        const originalLog = console.log;
                        console.log = function(...args) {
                            window.parent.postMessage({type: 'log', data: args.join(' ')}, '*');
                            originalLog.apply(console, args);
                        };
                    <\/script>
                `;

                const blob = new Blob([proxyScript + code], { type: 'text/html' });
                preview.src = URL.createObjectURL(blob);
                
                // Reset status on valid update
                statusLight.classList.remove('error');
                statusText.innerText = "System Ready";
            } catch (err) {
                appendLog(err.message, 'error');
            }
        }

        window.addEventListener('message', (event) => {
            if (event.data.type === 'error') {
                appendLog(event.data.data, 'error');
                statusLight.classList.add('error');
                statusText.innerText = "Error Detected";
            } else if (event.data.type === 'log') {
                appendLog(event.data.data, 'info');
            }
        });

        // Real-time listener
        editor.addEventListener('input', update);
        
        // Initial run
        update();
        appendLog("Studio Pro Initialized. Listening for changes...");
    </script>
</body>
</html>
